!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e,t="http://www.w3.org/2000/svg",r=[],n=function(e,t){var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),t&&Object.keys(t).forEach((function(e){r[e]=t[e]})),r},o=function(e,t){return e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties)},i=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},a=function(e,t,r){if(""!==t.vnodeSelector)for(var n=r;n<e.length;n++)if(o(e[n],t))return n;return-1},d=function(e,t,r,n){var i=e[t];if(""!==i.vnodeSelector){var a=i.properties;if(!(a?void 0===a.key?a.bind:a.key:void 0))for(var d=0;d<e.length;d++)if(d!==t){var s=e[d];if(o(s,i))throw new Error(r.vnodeSelector+" had a "+i.vnodeSelector+" child "+("added"===n?n:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.")}}},s=function(e){if(e.properties){var t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},l=[],p=!1,c=function(e){(e.children||[]).forEach(c),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},u=function(){p=!1,l.forEach(c),l.length=0},f=function(e){l.push(e),p||(p=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(u,{timeout:16}):setTimeout(u,16))},v=function(e){var t=e.domNode;if(e.properties){var r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";return void r(t,(function(){t.parentNode&&(t.parentNode.removeChild(t),f(e))}),e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),f(e))},h=function(e,r,n){!function(e,t,r){if(t)for(var n=0,o=t;n<o.length;n++){var i=o[n];g(i,e,void 0,r)}}(e,r.children,n),r.text&&(e.textContent=r.text),function(e,r,n){if(r)for(var o=n.eventHandlerInterceptor,a=Object.keys(r),d=a.length,s=function(d){var s,l=a[d],p=r[l];if("className"===l)throw new Error('Property "className" is not supported, use "class".');if("class"===l)m(e,p,!0);else if("classes"===l)for(var c=Object.keys(p),u=c.length,f=0;f<u;f++){var v=c[f];p[v]&&e.classList.add(v)}else if("styles"===l){var h=Object.keys(p),g=h.length;for(f=0;f<g;f++){var y=h[f],b=p[y];b&&(i(b),n.styleApplyer(e,y,b))}}else if("key"!==l&&null!=p){var N=typeof p;"function"===N?0===l.lastIndexOf("on",0)&&(o&&(p=o(l,p,e,r)),"oninput"===l&&(s=p,p=function(e){s.apply(this,[e]),e.target["oninput-value"]=e.target.value}),e[l]=p):n.namespace===t?"href"===l?e.setAttributeNS("http://www.w3.org/1999/xlink",l,p):e.setAttribute(l,p):"string"===N&&"value"!==l&&"innerHTML"!==l?e.setAttribute(l,p):e[l]=p}},l=0;l<d;l++)s(l)}(e,r.properties,n),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[e,n,r.vnodeSelector,r.properties,r.children])},g=function(e,r,o,i){var a,d=0,s=e.vnodeSelector,l=r.ownerDocument;if(""===s)a=e.domNode=l.createTextNode(e.text),void 0!==o?r.insertBefore(a,o):r.appendChild(a);else{for(var p=0;p<=s.length;++p){var c=s.charAt(p);if(p===s.length||"."===c||"#"===c){var u=s.charAt(d-1),f=s.slice(d,p);"."===u?a.classList.add(f):"#"===u?a.id=f:("svg"===f&&(i=n(i,{namespace:t})),void 0!==i.namespace?a=e.domNode=l.createElementNS(i.namespace,f):(a=e.domNode=e.domNode||l.createElement(f),"input"===f&&e.properties&&void 0!==e.properties.type&&a.setAttribute("type",e.properties.type)),void 0!==o?r.insertBefore(a,o):a.parentNode!==r&&r.appendChild(a)),d=p+1}}h(a,e,i)}},m=function(e,t,r){t&&t.split(" ").forEach((function(t){t&&e.classList.toggle(t,r)}))};e=function(l,p,c){var u=l.domNode,f=!1;if(l===p)return!1;var h=!1;if(""===p.vnodeSelector){if(p.text!==l.text){var y=u.ownerDocument.createTextNode(p.text);return u.parentNode.replaceChild(y,u),p.domNode=y,f=!0}p.domNode=u}else 0===p.vnodeSelector.lastIndexOf("svg",0)&&(c=n(c,{namespace:t})),l.text!==p.text&&(h=!0,void 0===p.text?u.removeChild(u.firstChild):u.textContent=p.text),p.domNode=u,h=function(t,n,i,l,p){if(i===l)return!1;l=l||r;for(var c,u=(i=i||r).length,f=l.length,h=0,m=0,y=!1;m<f;){var b=h<u?i[h]:void 0,N=l[m];if(void 0!==b&&o(b,N))y=e(b,N,p)||y,h++;else{var w=a(i,N,h+1);if(w>=0){for(c=h;c<w;c++)v(i[c]),d(i,c,t,"removed");y=e(i[w],N,p)||y,h=w+1}else g(N,n,h<u?i[h].domNode:void 0,p),s(N),d(l,m,t,"added")}m++}if(u>h)for(c=h;c<u;c++)v(i[c]),d(i,c,t,"removed");return y}(p,u,l.children,p.children,c)||h,h=function(e,r,n,o){if(n){for(var a=!1,d=Object.keys(n),s=d.length,l=0;l<s;l++){var p=d[l],c=n[p],u=r[p];if("class"===p)u!==c&&(m(e,u,!1),m(e,c,!0));else if("classes"===p)for(var f=e.classList,v=Object.keys(c),h=v.length,g=0;g<h;g++){var y=v[g],b=!!c[y];b!==!!u[y]&&(a=!0,b?f.add(y):f.remove(y))}else if("styles"===p){var N=Object.keys(c),w=N.length;for(g=0;g<w;g++){var k=N[g],S=c[k];S!==u[k]&&(a=!0,S?(i(S),o.styleApplyer(e,k,S)):o.styleApplyer(e,k,""))}}else if(c||"string"!=typeof u||(c=""),"value"===p){var x=e[p];x!==c&&(e["oninput-value"]?x===e["oninput-value"]:c!==u)&&(e[p]=c,e["oninput-value"]=void 0),c!==u&&(a=!0)}else if(c!==u){var A=typeof c;"function"===A&&o.eventHandlerInterceptor||(o.namespace===t?"href"===p?e.setAttributeNS("http://www.w3.org/1999/xlink",p,c):e.setAttribute(p,c):"string"===A&&"innerHTML"!==p?"role"===p&&""===c?e.removeAttribute(p):e.setAttribute(p,c):e[p]!==c&&(e[p]=c),a=!0)}}return a}}(u,l.properties,p.properties,c)||h,p.properties&&p.properties.afterUpdate&&p.properties.afterUpdate.apply(p.properties.bind||p.properties,[u,c,p.vnodeSelector,p.properties,p.children]);return h&&p.properties&&p.properties.updateAnimation&&p.properties.updateAnimation(u,p.properties,l.properties),f};var y=function(t,r){return{getLastRender:function(){return t},update:function(n){if(t.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var o=t;t=n,e(o,n,r)},domNode:t.domNode}},b={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(e,t,r){e.style[t]=r}},N=function(e){return n(b,e)},w=function(e,t,r){return r=N(r),g(t,e,void 0,r),y(t,r)},k=function(e,t,r){return r=N(r),g(t,e.parentNode,e,r),y(t,r)},S=function(e,t,r){return r=N(r),t.domNode=e,h(e,t,r),y(t,r)},x=function(e,t,r){return r=N(r),g(t,e.parentNode,e,r),e.parentNode.removeChild(e),y(t,r)},A=function(e,t,r){for(var n=0,o=t.length;n<o;n++){var i=t[n];Array.isArray(i)?A(e,i,r):null!=i&&!1!==i&&("string"==typeof i&&(i={vnodeSelector:"",properties:void 0,children:void 0,text:i.toString(),domNode:null}),r.push(i))}};function C(e,t,r){if(Array.isArray(t))r=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||r&&("string"==typeof r||r.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");var n,o;return r&&1===r.length&&"string"==typeof r[0]?n=r[0]:r&&(A(e,r,o=[]),0===o.length&&(o=void 0)),{vnodeSelector:e,properties:t,children:o,text:""===n?void 0:n,domNode:null}}var E,O=function(e,t){for(var r=[];e&&e!==t;)r.push(e),e=e.parentNode;return r};E=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){return e.filter(t)[0]};var L=function(e,t){var r=e;return t.forEach((function(e){r=r&&r.children?E(r.children,(function(t){return t.domNode===e})):void 0})),r},I=function(e){var t,r,n=N(e),o=n.performanceLogger,i=!0,a=!1,d=[],s=[],l=function(e,r,i){var a;n.eventHandlerInterceptor=function(e,t,r){var n=function(n){r("domEvent",n);var o=t(),i=O(n.currentTarget,o.domNode);i.reverse();var a,d=L(o.getLastRender(),i);return e.scheduleRender(),d&&(a=d.properties["on"+n.type].apply(d.properties.bind||this,arguments)),r("domEventProcessed",n),a};return function(e,t,r,o){return n}}(t,(function(){return a}),o),a=e(r,i(),n),d.push(a),s.push(i)},p=function(){if(r=void 0,i){i=!1,o("renderStart",void 0);for(var e=0;e<d.length;e++){var t=s[e]();o("rendered",void 0),d[e].update(t),o("patched",void 0)}o("renderDone",void 0),i=!0}};return t={renderNow:p,scheduleRender:function(){r||a||(r=requestAnimationFrame(p))},stop:function(){r&&(cancelAnimationFrame(r),r=void 0),a=!0},resume:function(){a=!1,i=!0,t.scheduleRender()},append:function(e,t){l(w,e,t)},insertBefore:function(e,t){l(k,e,t)},merge:function(e,t){l(S,e,t)},replace:function(e,t){l(x,e,t)},detach:function(e){for(var t=0;t<s.length;t++)if(s[t]===e)return s.splice(t,1),d.splice(t,1)[0];throw new Error("renderFunction was not found")}}};function T(e,t){const{hidden:r,onclick:n,loading:o}=e;return C("div",{class:`tag-popover ${r?"hidden":"visible"} ${o?"loading":""}`,onclick:n,tabIndex:-1},[...t])}function j(e){const{id:t,className:r,value:n,placeholder:o,name:i,type:a,disabled:d,tags:s,availableTags:l,setState:p,popoverHidden:c,loadingTags:u}=e,f=s.map(e=>function(e){const{key:t,text:r,onDelete:n}=e;return C("a",{key:t,class:"tag-pill",href:"#",onclick:function(e){e.preventDefault(),n()}},[C("span",{},[r||""]),C("div",{class:"delete-button"})])}({key:e,text:e,onDelete:()=>{const t=s.filter(t=>t!==e);p({tags:t,value:t.join(",")})}})),v=e=>{e.preventDefault(),p({popoverHidden:!c})},h=e=>()=>{const t=s.includes(e)?s.filter(t=>t!==e):[...s,e];p({tags:t,value:t.join(",")})},g=u||c?[C("div",{class:"loading-spinner"})]:[C("ul",{class:"tag-options",tabIndex:-1},(l||[]).map(e=>function(e){const{tag:t,onSelect:r,selected:n}=e,o=function(e){e.stopPropagation(),e.preventDefault(),r()};return C("li",{class:"tag-option "+(n?"selected":""),key:t,onclick:o,onkeyup:function(e){return 13!=event.which&&13!=event.keyCode||(o(e),!1)},tabIndex:0},[t])}({tag:e,onSelect:h(e),selected:s.includes(e)})))];return C("div",{class:"tag-input "+(d?"disabled":"")},[C("input",{id:t,class:r,value:n,placeholder:o,name:i,type:a,hidden:!0}),C("div",{class:"add-tag-button "+(c?"":"active"),onclick:v,onkeyup:function(e){return 13!=event.which&&13!=event.keyCode||(v(e),!1)},tabIndex:0},[T({hidden:c,onclick:e=>{e.stopPropagation(),e.preventDefault()},loading:u},g)]),...f])}function D(e){var t,r=I(),n={id:e.id,className:e.className,value:e.value,placeholder:e.placeholder,name:e.name,type:e.type,tags:(e.value||"").split(",").map(e=>e.trim()).filter(e=>e),popoverHidden:!0,loadingTags:!0};t=function(e){n={...n,...e},r.scheduleRender()},r.replace(e,(function(){return j({...n,setState:t})})),function(e,t){t({disabled:!0}),fetch("/tags/suggestions").then(e=>e.json()).then(e=>t({availableTags:e||[],loadingTags:!1}))}(0,t)}function H(e){if(e.classList.contains("chart-bar")){const t=JSON.parse(e.dataset.chartConfig);new Chartist.Bar(e,t,{fullWidth:!0,plugins:[Chartist.plugins.tooltip({anchorToPoint:!0})]})}}document.addEventListener("DOMContentLoaded",(function(){let e;e=()=>{[...document.querySelectorAll("[data-input-type='tags-input']")].forEach(D),[...document.querySelectorAll(".ct-chart")].forEach(H),$('[data-toggle="tooltip"]').tooltip(),bsCustomFileInput.init()},document.addEventListener("turbolinks:load",e),e()}))}));